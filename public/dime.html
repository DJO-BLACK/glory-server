<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>GLORY ‚Äì D√Æme</title>
  <link rel="stylesheet" href="style.css"/><link rel="manifest" href="manifest.json"/>
  <style>
    .dime-verse{text-align:center;color:var(--text-muted);max-width:580px;margin:0 auto 3rem;line-height:1.9;font-family:'Playfair Display',serif;font-style:italic;}
    .dime-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1.5rem;max-width:900px;margin:0 auto 3rem;}
    .dime-card{background:rgba(212,175,55,.04);border:1px solid rgba(212,175,55,.2);border-radius:8px;padding:2rem;text-align:center;transition:all .3s;}
    .dime-card:hover{background:rgba(212,175,55,.1);transform:translateY(-4px);}
    .dime-icon{font-size:2.5rem;margin-bottom:.8rem;}
    .dime-card h4{font-family:'Cinzel Decorative',cursive;color:var(--gold);font-size:.95rem;margin-bottom:.5rem;}
    .dime-card p{color:var(--text-muted);font-size:.83rem;line-height:1.6;margin-bottom:1.2rem;}
    .amounts{display:flex;gap:.4rem;flex-wrap:wrap;justify-content:center;margin-bottom:1rem;}
    .amt-btn{background:rgba(212,175,55,.08);border:1px solid rgba(212,175,55,.25);color:var(--gold-light);padding:.35rem .7rem;font-size:.78rem;cursor:pointer;border-radius:4px;transition:all .3s;}
    .amt-btn:hover,.amt-btn.sel{background:var(--gold);color:var(--bg-dark);font-weight:700;}
    .btn-donate{background:transparent;border:1px solid var(--gold);color:var(--gold);padding:.6rem 1.5rem;letter-spacing:1px;font-size:.8rem;cursor:pointer;border-radius:4px;transition:all .3s;width:100%;}
    .btn-donate:hover{background:var(--gold);color:var(--bg-dark);}
    .custom-amt{background:rgba(0,0,0,.4);border:1px solid rgba(212,175,55,.2);color:var(--white);padding:.5rem .8rem;border-radius:4px;width:100%;text-align:center;outline:none;margin-bottom:1rem;font-size:.9rem;}
    .custom-amt:focus{border-color:var(--gold);}
    /* M√©thodes paiement */
    .payment-methods{max-width:700px;margin:0 auto;}
    .payment-methods h3{font-family:'Playfair Display',serif;color:var(--gold);font-size:1.2rem;margin-bottom:1.5rem;text-align:center;}
    .methods-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem;}
    .method-card{background:rgba(255,255,255,.02);border:2px solid rgba(212,175,55,.12);border-radius:8px;padding:1.2rem;text-align:center;cursor:pointer;transition:all .3s;}
    .method-card:hover,.method-card.sel{border-color:var(--gold);background:rgba(212,175,55,.08);}
    .method-icon{font-size:2rem;margin-bottom:.5rem;}
    .method-name{font-size:.78rem;color:var(--white);font-weight:700;}
    .method-sub{font-size:.65rem;color:var(--text-muted);margin-top:.2rem;}
    /* Pay modal */
    .pay-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.88);z-index:2000;align-items:center;justify-content:center;backdrop-filter:blur(8px);}
    .pay-overlay.open{display:flex;}
    .pay-modal{background:var(--bg-mid);border:1px solid rgba(212,175,55,.3);width:90%;max-width:440px;padding:2.5rem;border-radius:8px;position:relative;animation:modalIn .3s ease;}
    @keyframes modalIn{from{opacity:0;transform:scale(.92);}to{opacity:1;transform:scale(1);}}
    .pay-step{display:none;} .pay-step.active{display:block;}
    .pay-method-info{background:rgba(212,175,55,.06);border:1px solid rgba(212,175,55,.15);border-radius:6px;padding:1rem;margin-bottom:1rem;text-align:center;}
    .pay-method-info .pm-icon{font-size:2rem;margin-bottom:.4rem;}
    .pay-method-info h4{color:var(--gold);font-family:'Playfair Display',serif;}
    .pay-method-info p{color:var(--text-muted);font-size:.83rem;margin-top:.3rem;}
    .pay-instructions{background:rgba(0,0,0,.3);border:1px solid rgba(212,175,55,.15);border-radius:6px;padding:1rem;margin-bottom:1rem;font-size:.85rem;color:var(--text-muted);line-height:1.8;}
    .pay-instructions strong{color:var(--gold);}
    .pay-confirm-row{display:flex;gap:.8rem;}
    .btn-back{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);color:var(--text-muted);padding:.7rem 1.2rem;border-radius:4px;cursor:pointer;font-size:.82rem;}
    .btn-back:hover{border-color:var(--gold);color:var(--gold);}
    .success-screen{text-align:center;padding:1rem 0;}
    .success-icon{font-size:3rem;margin-bottom:1rem;}
  </style>
</head>
<body>
<div class="page-content">
  <div class="section-wrap">
    <div class="section-header">
      <span class="section-tag" data-i18n="tithe_tag">‚ú¶ Offrandes ‚ú¶</span>
      <h2 class="section-title" data-i18n="tithe_title">D√Æme & Offrandes</h2>
      <div class="section-line"></div>
    </div>
    <p class="dime-verse">"Apportez √† la maison du tr√©sor toutes les d√Æmes... et mettez-moi ainsi √† l'√©preuve, dit l'√âternel." ‚Äî Malachie 3:10</p>
    <div class="dime-grid">
      <div class="dime-card">
        <div class="dime-icon">üíõ</div><h4>D√Æme</h4>
        <p>Honore Dieu avec tes pr√©mices. Ta d√Æme soutient le minist√®re GLORY.</p>
        <div class="amounts">
          <button class="amt-btn" onclick="pickAmt(this,'dime',10)">10$</button>
          <button class="amt-btn" onclick="pickAmt(this,'dime',25)">25$</button>
          <button class="amt-btn" onclick="pickAmt(this,'dime',50)">50$</button>
          <button class="amt-btn" onclick="pickAmt(this,'dime',100)">100$</button>
        </div>
        <button class="btn-donate" onclick="openPay('D√Æme','dime')">Donner ma D√Æme</button>
      </div>
      <div class="dime-card">
        <div class="dime-icon">üôè</div><h4>Offrande</h4>
        <p>Donne librement depuis ton c≈ìur. Chaque offrande est pr√©cieuse devant Dieu.</p>
        <div class="amounts">
          <button class="amt-btn" onclick="pickAmt(this,'offrande',5)">5$</button>
          <button class="amt-btn" onclick="pickAmt(this,'offrande',15)">15$</button>
          <button class="amt-btn" onclick="pickAmt(this,'offrande',30)">30$</button>
          <button class="amt-btn" onclick="pickAmt(this,'offrande',60)">60$</button>
        </div>
        <button class="btn-donate" onclick="openPay('Offrande','offrande')">Donner une Offrande</button>
      </div>
      <div class="dime-card">
        <div class="dime-icon">‚ú®</div><h4>Don Libre</h4>
        <p>Soutenez la vision GLORY avec le montant de votre choix.</p>
        <input type="number" class="custom-amt" id="customAmt" placeholder="Montant en $" min="1"/>
        <button class="btn-donate" onclick="openPay('Don Libre','libre')">Envoyer un Don</button>
      </div>
    </div>
    <!-- M√©thodes de paiement -->
    <div class="payment-methods">
      <h3>üí≥ M√©thodes de Paiement Disponibles</h3>
      <div class="methods-grid">
        <div class="method-card sel" id="m-paypal" onclick="selMethod('paypal')"><div class="method-icon">üÖø</div><div class="method-name">PayPal</div><div class="method-sub">Instantan√©</div></div>
        <div class="method-card" id="m-card" onclick="selMethod('card')"><div class="method-icon">üí≥</div><div class="method-name">Carte Bancaire</div><div class="method-sub">Visa / Mastercard</div></div>
        <div class="method-card" id="m-mobile" onclick="selMethod('mobile')"><div class="method-icon">üì±</div><div class="method-name">Mobile Money</div><div class="method-sub">MTN / Orange / Wave</div></div>
        <div class="method-card" id="m-cashapp" onclick="selMethod('cashapp')"><div class="method-icon">üíö</div><div class="method-name">CashApp</div><div class="method-sub">$Glory</div></div>
        <div class="method-card" id="m-crypto" onclick="selMethod('crypto')"><div class="method-icon">‚Çø</div><div class="method-name">Crypto</div><div class="method-sub">BTC / ETH / USDT</div></div>
        <div class="method-card" id="m-virement" onclick="selMethod('virement')"><div class="method-icon">üè¶</div><div class="method-name">Virement</div><div class="method-sub">Bancaire</div></div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Paiement -->
<div class="pay-overlay" id="payOverlay">
  <div class="pay-modal">
    <button style="position:absolute;top:1rem;right:1rem;background:none;border:none;color:var(--text-muted);font-size:1.5rem;cursor:pointer;" onclick="closePay()">√ó</button>
    <!-- Step 1: Montant -->
    <div class="pay-step active" id="step1">
      <div class="modal-logo">üíõ Donner √† GLORY</div>
      <div class="form-group"><label>Type</label><input type="text" id="payType" readonly style="color:var(--gold);"/></div>
      <div class="form-group"><label>Montant ($)</label><input type="number" id="payAmount" placeholder="0.00" min="1"/></div>
      <div class="form-group"><label>Note (optionnel)</label><input type="text" id="payNote" placeholder="Pour quelle intention..."/></div>
      <button class="btn-submit" onclick="goToStep2()">Choisir la m√©thode ‚Üí</button>
    </div>
    <!-- Step 2: Instructions -->
    <div class="pay-step" id="step2">
      <div class="pay-method-info" id="methodInfo"></div>
      <div class="pay-instructions" id="methodInstructions"></div>
      <div class="pay-confirm-row">
        <button class="btn-back" onclick="goToStep1()">‚Üê Retour</button>
        <button class="btn-submit" style="flex:1;" onclick="confirmPayment()">J'ai pay√© ‚ú¶</button>
      </div>
    </div>
    <!-- Step 3: Succ√®s -->
    <div class="pay-step" id="step3">
      <div class="success-screen">
        <div class="success-icon">üôè</div>
        <h3 style="font-family:'Cinzel Decorative',cursive;color:var(--gold);margin-bottom:1rem;">Merci !</h3>
        <p style="color:var(--text-muted);line-height:1.8;margin-bottom:1.5rem;">"Dieu aime celui qui donne avec joie." ‚Äî 2 Corinthiens 9:7<br><br>Que le Seigneur te b√©nisse au centuple pour ta g√©n√©rosit√©.</p>
        <button class="btn-submit" onclick="closePay()">Fermer</button>
      </div>
    </div>
  </div>
</div>

<script src="components.js"></script><script src="auth.js"></script><script src="i18n.js"></script><script src="notifications.js"></script>
<script>
let selAmts={},curMethod='paypal',curDonType='';
const methodData={
  paypal:{icon:'üÖø',name:'PayPal',instructions:'<strong>Email PayPal :</strong> glory@paypal.com<br><br>Envoie le montant exact en "Famille/Amis" et indique ton pr√©nom en note.'},
  card:{icon:'üí≥',name:'Carte Bancaire',instructions:'<strong>Via Stripe (s√©curis√©) :</strong><br><br>Tu seras redirig√© vers notre page de paiement s√©curis√©e. Toutes les cartes Visa et Mastercard sont accept√©es.'},
  mobile:{icon:'üì±',name:'Mobile Money',instructions:'<strong>MTN Mobile Money :</strong> +225 07 00 00 00<br><strong>Orange Money :</strong> +225 07 00 00 01<br><strong>Wave :</strong> +225 07 00 00 02<br><br>Apr√®s paiement, envoie une capture d\'√©cran √† glory@ministry.com'},
  cashapp:{icon:'üíö',name:'CashApp',instructions:'<strong>Identifiant CashApp :</strong> $GloryMinistry<br><br>Envoie le montant et ajoute une note avec ton pr√©nom et le type de don.'},
  crypto:{icon:'‚Çø',name:'Crypto',instructions:'<strong>Bitcoin (BTC) :</strong><br><small style="word-break:break-all;color:var(--gold);">bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh</small><br><br><strong>USDT (TRC20) :</strong><br><small style="word-break:break-all;color:var(--gold);">TN3W4T1Wh7JBNkRpH6FmNFjFPKbHBw1234</small>'},
  virement:{icon:'üè¶',name:'Virement Bancaire',instructions:'<strong>IBAN :</strong> FR76 1234 5678 9012 3456 7890 123<br><strong>BIC :</strong> GLORFRPP<br><strong>B√©n√©ficiaire :</strong> Association GLORY Ministry<br><br>R√©f√©rence : ton pr√©nom + type de don'}
};

function pickAmt(btn,type,val){btn.closest('.amounts').querySelectorAll('.amt-btn').forEach(b=>b.classList.remove('sel'));btn.classList.add('sel');selAmts[type]=val;}
function selMethod(m){curMethod=m;document.querySelectorAll('.method-card').forEach(c=>c.classList.remove('sel'));document.getElementById('m-'+m).classList.add('sel');}

function openPay(type,key){
  const user=getSession();if(!user){openModal('login');return;}
  curDonType=key;
  document.getElementById('payType').value=type;
  const custom=document.getElementById('customAmt')?.value;
  document.getElementById('payAmount').value=selAmts[key]||custom||'';
  goToStep1();
  document.getElementById('payOverlay').classList.add('open');
}
function closePay(){document.getElementById('payOverlay').classList.remove('open');['step1','step2','step3'].forEach(s=>{document.getElementById(s).classList.remove('active');});document.getElementById('step1').classList.add('active');}
function goToStep1(){document.getElementById('step2').classList.remove('active');document.getElementById('step3').classList.remove('active');document.getElementById('step1').classList.add('active');}
function goToStep2(){
  const amt=document.getElementById('payAmount').value;
  if(!amt||amt<=0){toast('Entre un montant valide.');return;}
  const m=methodData[curMethod];
  document.getElementById('methodInfo').innerHTML=`<div class="pm-icon">${m.icon}</div><h4>${m.name}</h4><p>Montant : <strong style="color:var(--gold);">$${amt}</strong></p>`;
  document.getElementById('methodInstructions').innerHTML=m.instructions;
  document.getElementById('step1').classList.remove('active');document.getElementById('step2').classList.add('active');
}
function confirmPayment(){
  const amt=document.getElementById('payAmount').value;
  const dons=(parseInt(localStorage.getItem('g_dons')||'0'))+1;localStorage.setItem('g_dons',dons.toString());
  const user=getSession();if(user){const dk='glory_likes_'+user.email;/* track don */}
  document.getElementById('step2').classList.remove('active');document.getElementById('step3').classList.add('active');
}
</script>
</body></html>
